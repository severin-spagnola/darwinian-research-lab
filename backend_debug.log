2026-01-28 12:02:06,410 - __main__ - WARNING - HTTP 404 GET /api/runs/20260128_114400 -> Run not found
2026-01-28 12:02:06,410 - __main__ - WARNING - HTTP 404 GET /api/runs/20260128_114400 -> Run not found
2026-01-28 12:02:06,411 - __main__ - INFO - HTTP 404 GET /api/runs/20260128_114400 from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.002s
2026-01-28 12:02:06,411 - __main__ - INFO - HTTP 404 GET /api/runs/20260128_114400 from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.002s
2026-01-28 12:02:24,790 - __main__ - INFO - Received request to start run 20260128_120224
2026-01-28 12:02:24,791 - __main__ - INFO - Request: nl_text length=323, symbols=['AAPL'], timeframe=5m, dates=2024-10-01 to 2025-01-01, depth=3, branching=2, max_evals=50
2026-01-28 12:02:24,791 - __main__ - INFO - Initialized job tracking for 20260128_120224
2026-01-28 12:02:24,791 - __main__ - INFO - Added background task for 20260128_120224
2026-01-28 12:02:24,792 - __main__ - INFO - Starting Darwin job 20260128_120224
2026-01-28 12:02:24,792 - __main__ - INFO - Request params: symbols=['AAPL'], timeframe=5m, depth=3
2026-01-28 12:02:24,792 - __main__ - INFO - [20260128_120224] Emitted run_started event
2026-01-28 12:02:24,792 - __main__ - INFO - [20260128_120224] Initializing Polygon client
2026-01-28 12:02:24,792 - __main__ - INFO - [20260128_120224] Fetching data for AAPL
2026-01-28 12:02:26,918 - __main__ - INFO - [20260128_120224] Successfully fetched 11450 bars for AAPL
2026-01-28 12:02:26,918 - __main__ - INFO - [20260128_120224] Using AAPL data for evolution
2026-01-28 12:02:26,918 - __main__ - INFO - [20260128_120224] Resetting LLM budget
2026-01-28 12:02:26,918 - __main__ - INFO - [20260128_120224] Created universe and time config
2026-01-28 12:02:26,918 - __main__ - INFO - [20260128_120224] Starting Darwin evolution
2026-01-28 12:02:26,918 - __main__ - INFO - [20260128_120224] run_darwin_with_events called with kwargs: ['data', 'universe', 'time_config', 'nl_text', 'depth', 'branching', 'survivors_per_layer', 'max_total_evals']
2026-01-28 12:02:26,918 - __main__ - INFO - [20260128_120224] Calling run_darwin
2026-01-28 12:02:39,629 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-28 12:02:39,644 - __main__ - ERROR - [20260128_120224] run_darwin failed: Node entry_compare references non-existent node constant
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 105, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 53, in run_backtest_on_data
    context = executor.execute(strategy, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 40, in execute
    self._validate_graph(graph)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 62, in _validate_graph
    graph.validate_structure()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/schema.py", line 103, in validate_structure
    raise ValueError(f"Node {node.id} references non-existent node {ref_node_id}")
ValueError: Node entry_compare references non-existent node constant
2026-01-28 12:02:39,649 - __main__ - ERROR - [20260128_120224] Job failed with error: Node entry_compare references non-existent node constant
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 329, in _run_darwin_job
    summary = run_darwin_with_events(
        run_id=run_id,
    ...<8 lines>...
        max_total_evals=request.max_total_evals,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 105, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 53, in run_backtest_on_data
    context = executor.execute(strategy, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 40, in execute
    self._validate_graph(graph)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 62, in _validate_graph
    graph.validate_structure()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/schema.py", line 103, in validate_structure
    raise ValueError(f"Node {node.id} references non-existent node {ref_node_id}")
ValueError: Node entry_compare references non-existent node constant
2026-01-28 12:02:39,651 - __main__ - ERROR - [20260128_120224] Full traceback:
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 329, in _run_darwin_job
    summary = run_darwin_with_events(
        run_id=run_id,
    ...<8 lines>...
        max_total_evals=request.max_total_evals,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 105, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 53, in run_backtest_on_data
    context = executor.execute(strategy, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 40, in execute
    self._validate_graph(graph)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 62, in _validate_graph
    graph.validate_structure()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/schema.py", line 103, in validate_structure
    raise ValueError(f"Node {node.id} references non-existent node {ref_node_id}")
ValueError: Node entry_compare references non-existent node constant

2026-01-28 12:02:39,657 - __main__ - WARNING - HTTP 404 GET /api/runs/20260128_120224 -> Run not found
2026-01-28 12:02:39,661 - __main__ - INFO - HTTP 404 GET /api/runs/20260128_120224 from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.006s
2026-01-28 12:02:39,678 - __main__ - WARNING - HTTP 404 GET /api/runs/20260128_120224 -> Run not found
2026-01-28 12:02:39,678 - __main__ - INFO - HTTP 404 GET /api/runs/20260128_120224 from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.001s
2026-01-28 12:04:47,792 - __main__ - INFO - Received request to start run 20260128_120447
2026-01-28 12:04:47,793 - __main__ - INFO - Request: nl_text length=323, symbols=['AAPL'], timeframe=5m, dates=2024-10-01 to 2025-01-01, depth=3, branching=2, max_evals=50
2026-01-28 12:04:47,793 - __main__ - INFO - Initialized job tracking for 20260128_120447
2026-01-28 12:04:47,793 - __main__ - INFO - Added background task for 20260128_120447
2026-01-28 12:04:47,793 - __main__ - INFO - Starting Darwin job 20260128_120447
2026-01-28 12:04:47,793 - __main__ - INFO - Request params: symbols=['AAPL'], timeframe=5m, depth=3
2026-01-28 12:04:47,793 - __main__ - INFO - [20260128_120447] Emitted run_started event
2026-01-28 12:04:47,793 - __main__ - INFO - [20260128_120447] Initializing Polygon client
2026-01-28 12:04:47,793 - __main__ - INFO - [20260128_120447] Fetching data for AAPL
2026-01-28 12:04:49,589 - __main__ - INFO - [20260128_120447] Successfully fetched 11450 bars for AAPL
2026-01-28 12:04:49,590 - __main__ - INFO - [20260128_120447] Using AAPL data for evolution
2026-01-28 12:04:49,590 - __main__ - INFO - [20260128_120447] Resetting LLM budget
2026-01-28 12:04:49,590 - __main__ - INFO - [20260128_120447] Created universe and time config
2026-01-28 12:04:49,590 - __main__ - INFO - [20260128_120447] Starting Darwin evolution
2026-01-28 12:04:49,590 - __main__ - INFO - [20260128_120447] run_darwin_with_events called with kwargs: ['data', 'universe', 'time_config', 'nl_text', 'depth', 'branching', 'survivors_per_layer', 'max_total_evals']
2026-01-28 12:04:49,590 - __main__ - INFO - [20260128_120447] Calling run_darwin
2026-01-28 12:04:49,591 - __main__ - ERROR - [20260128_120447] run_darwin failed: Node entry_compare references non-existent node constant
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 105, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 53, in run_backtest_on_data
    context = executor.execute(strategy, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 40, in execute
    self._validate_graph(graph)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 62, in _validate_graph
    graph.validate_structure()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/schema.py", line 103, in validate_structure
    raise ValueError(f"Node {node.id} references non-existent node {ref_node_id}")
ValueError: Node entry_compare references non-existent node constant
2026-01-28 12:04:49,594 - __main__ - ERROR - [20260128_120447] Job failed with error: Node entry_compare references non-existent node constant
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 329, in _run_darwin_job
    summary = run_darwin_with_events(
        run_id=run_id,
    ...<8 lines>...
        max_total_evals=request.max_total_evals,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 105, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 53, in run_backtest_on_data
    context = executor.execute(strategy, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 40, in execute
    self._validate_graph(graph)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 62, in _validate_graph
    graph.validate_structure()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/schema.py", line 103, in validate_structure
    raise ValueError(f"Node {node.id} references non-existent node {ref_node_id}")
ValueError: Node entry_compare references non-existent node constant
2026-01-28 12:04:49,595 - __main__ - ERROR - [20260128_120447] Full traceback:
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 329, in _run_darwin_job
    summary = run_darwin_with_events(
        run_id=run_id,
    ...<8 lines>...
        max_total_evals=request.max_total_evals,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 105, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 53, in run_backtest_on_data
    context = executor.execute(strategy, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 40, in execute
    self._validate_graph(graph)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 62, in _validate_graph
    graph.validate_structure()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/schema.py", line 103, in validate_structure
    raise ValueError(f"Node {node.id} references non-existent node {ref_node_id}")
ValueError: Node entry_compare references non-existent node constant

2026-01-28 12:04:49,598 - __main__ - WARNING - HTTP 404 GET /api/runs/20260128_120447 -> Run not found
2026-01-28 12:04:49,599 - __main__ - INFO - HTTP 404 GET /api/runs/20260128_120447 from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.002s
2026-01-28 12:04:49,606 - __main__ - WARNING - HTTP 404 GET /api/runs/20260128_120447 -> Run not found
2026-01-28 12:04:49,606 - __main__ - INFO - HTTP 404 GET /api/runs/20260128_120447 from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.001s
2026-01-28 12:11:45,911 - __main__ - WARNING - HTTP 404 GET /api/runs/20260128_120447 -> Run not found
2026-01-28 12:11:45,913 - __main__ - INFO - HTTP 404 GET /api/runs/20260128_120447 from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.003s
2026-01-28 12:11:45,920 - __main__ - WARNING - HTTP 404 GET /api/runs/20260128_120447 -> Run not found
2026-01-28 12:11:45,920 - __main__ - INFO - HTTP 404 GET /api/runs/20260128_120447 from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.001s
2026-01-28 12:11:57,499 - __main__ - INFO - Received request to start run 20260128_121157
2026-01-28 12:11:57,499 - __main__ - INFO - Request: nl_text length=323, symbols=['AAPL'], timeframe=5m, dates=2024-10-01 to 2025-01-01, depth=3, branching=2, max_evals=50
2026-01-28 12:11:57,499 - __main__ - INFO - Initialized job tracking for 20260128_121157
2026-01-28 12:11:57,499 - __main__ - INFO - Added background task for 20260128_121157
2026-01-28 12:11:57,500 - __main__ - INFO - Starting Darwin job 20260128_121157
2026-01-28 12:11:57,500 - __main__ - INFO - Request params: symbols=['AAPL'], timeframe=5m, depth=3
2026-01-28 12:11:57,500 - __main__ - INFO - [20260128_121157] Emitted run_started event
2026-01-28 12:11:57,500 - __main__ - INFO - [20260128_121157] Initializing Polygon client
2026-01-28 12:11:57,500 - __main__ - INFO - [20260128_121157] Fetching data for AAPL
2026-01-28 12:11:57,599 - __main__ - INFO - [20260128_121157] Successfully fetched 11450 bars for AAPL
2026-01-28 12:11:57,599 - __main__ - INFO - [20260128_121157] Using AAPL data for evolution
2026-01-28 12:11:57,599 - __main__ - INFO - [20260128_121157] Resetting LLM budget
2026-01-28 12:11:57,600 - __main__ - INFO - [20260128_121157] Created universe and time config
2026-01-28 12:11:57,600 - __main__ - INFO - [20260128_121157] Starting Darwin evolution
2026-01-28 12:11:57,600 - __main__ - INFO - [20260128_121157] run_darwin_with_events called with kwargs: ['data', 'universe', 'time_config', 'nl_text', 'depth', 'branching', 'survivors_per_layer', 'max_total_evals']
2026-01-28 12:11:57,600 - __main__ - INFO - [20260128_121157] Calling run_darwin
2026-01-28 12:11:57,604 - llm.compile - INFO - Strategy graph failed structure validation; attempting one repair
2026-01-28 12:12:09,957 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-28 12:12:09,976 - __main__ - ERROR - [20260128_121157] run_darwin failed: Unknown node type: MARKET_DATA
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 106, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 53, in run_backtest_on_data
    context = executor.execute(strategy, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 40, in execute
    self._validate_graph(graph)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 68, in _validate_graph
    raise GraphExecutionError(f"Unknown node type: {node.type}")
graph.executor.GraphExecutionError: Unknown node type: MARKET_DATA
2026-01-28 12:12:09,979 - __main__ - ERROR - [20260128_121157] Job failed with error: Unknown node type: MARKET_DATA
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 329, in _run_darwin_job
    summary = run_darwin_with_events(
        run_id=run_id,
    ...<8 lines>...
        max_total_evals=request.max_total_evals,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 106, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 53, in run_backtest_on_data
    context = executor.execute(strategy, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 40, in execute
    self._validate_graph(graph)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 68, in _validate_graph
    raise GraphExecutionError(f"Unknown node type: {node.type}")
graph.executor.GraphExecutionError: Unknown node type: MARKET_DATA
2026-01-28 12:12:09,981 - __main__ - ERROR - [20260128_121157] Full traceback:
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 329, in _run_darwin_job
    summary = run_darwin_with_events(
        run_id=run_id,
    ...<8 lines>...
        max_total_evals=request.max_total_evals,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 106, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 53, in run_backtest_on_data
    context = executor.execute(strategy, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 40, in execute
    self._validate_graph(graph)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 68, in _validate_graph
    raise GraphExecutionError(f"Unknown node type: {node.type}")
graph.executor.GraphExecutionError: Unknown node type: MARKET_DATA

2026-01-28 12:15:08,442 - __main__ - INFO - Received request to start run 20260128_121508
2026-01-28 12:15:08,443 - __main__ - INFO - Request: nl_text length=323, symbols=['AAPL'], timeframe=5m, dates=2024-10-01 to 2025-01-01, depth=3, branching=2, max_evals=50
2026-01-28 12:15:08,444 - __main__ - INFO - Initialized job tracking for 20260128_121508
2026-01-28 12:15:08,444 - __main__ - INFO - Added background task for 20260128_121508
2026-01-28 12:15:08,445 - __main__ - INFO - Starting Darwin job 20260128_121508
2026-01-28 12:15:08,445 - __main__ - INFO - Request params: symbols=['AAPL'], timeframe=5m, depth=3
2026-01-28 12:15:08,445 - __main__ - INFO - [20260128_121508] Emitted run_started event
2026-01-28 12:15:08,445 - __main__ - INFO - [20260128_121508] Initializing Polygon client
2026-01-28 12:15:08,445 - __main__ - INFO - [20260128_121508] Fetching data for AAPL
2026-01-28 12:15:08,502 - __main__ - INFO - [20260128_121508] Successfully fetched 11450 bars for AAPL
2026-01-28 12:15:08,502 - __main__ - INFO - [20260128_121508] Using AAPL data for evolution
2026-01-28 12:15:08,502 - __main__ - INFO - [20260128_121508] Resetting LLM budget
2026-01-28 12:15:08,502 - __main__ - INFO - [20260128_121508] Created universe and time config
2026-01-28 12:15:08,502 - __main__ - INFO - [20260128_121508] Starting Darwin evolution
2026-01-28 12:15:08,502 - __main__ - INFO - [20260128_121508] run_darwin_with_events called with kwargs: ['data', 'universe', 'time_config', 'nl_text', 'depth', 'branching', 'survivors_per_layer', 'max_total_evals']
2026-01-28 12:15:08,502 - __main__ - INFO - [20260128_121508] Calling run_darwin
2026-01-28 12:15:08,503 - llm.compile - INFO - Strategy graph failed structure validation; attempting one repair
2026-01-28 12:15:08,504 - __main__ - ERROR - [20260128_121508] run_darwin failed: Unknown node type: MARKET_DATA
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 106, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 53, in run_backtest_on_data
    context = executor.execute(strategy, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 40, in execute
    self._validate_graph(graph)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 68, in _validate_graph
    raise GraphExecutionError(f"Unknown node type: {node.type}")
graph.executor.GraphExecutionError: Unknown node type: MARKET_DATA
2026-01-28 12:15:08,507 - __main__ - ERROR - [20260128_121508] Job failed with error: Unknown node type: MARKET_DATA
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 329, in _run_darwin_job
    summary = run_darwin_with_events(
        run_id=run_id,
    ...<8 lines>...
        max_total_evals=request.max_total_evals,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 106, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 53, in run_backtest_on_data
    context = executor.execute(strategy, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 40, in execute
    self._validate_graph(graph)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 68, in _validate_graph
    raise GraphExecutionError(f"Unknown node type: {node.type}")
graph.executor.GraphExecutionError: Unknown node type: MARKET_DATA
2026-01-28 12:15:08,508 - __main__ - ERROR - [20260128_121508] Full traceback:
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 329, in _run_darwin_job
    summary = run_darwin_with_events(
        run_id=run_id,
    ...<8 lines>...
        max_total_evals=request.max_total_evals,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 106, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 53, in run_backtest_on_data
    context = executor.execute(strategy, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 40, in execute
    self._validate_graph(graph)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 68, in _validate_graph
    raise GraphExecutionError(f"Unknown node type: {node.type}")
graph.executor.GraphExecutionError: Unknown node type: MARKET_DATA

2026-01-28 18:40:36,713 - __main__ - WARNING - HTTP 404 GET /api/run/20260128_121508/events -> Run not found
2026-01-28 18:40:36,716 - __main__ - INFO - HTTP 404 GET /api/run/20260128_121508/events from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.005s
2026-01-28 18:40:36,717 - __main__ - WARNING - HTTP 404 GET /api/run/20260128_121508/events -> Run not found
2026-01-28 18:40:36,717 - __main__ - INFO - HTTP 404 GET /api/run/20260128_121508/events from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.000s
2026-01-28 18:40:57,472 - __main__ - INFO - Received request to start run 20260128_184057
2026-01-28 18:40:57,472 - __main__ - INFO - Request: nl_text length=323, symbols=['AAPL'], timeframe=5m, dates=2024-10-01 to 2025-01-01, depth=3, branching=2, max_evals=50
2026-01-28 18:40:57,472 - __main__ - INFO - Initialized job tracking for 20260128_184057
2026-01-28 18:40:57,472 - __main__ - INFO - Added background task for 20260128_184057
2026-01-28 18:40:57,473 - __main__ - INFO - Starting Darwin job 20260128_184057
2026-01-28 18:40:57,473 - __main__ - INFO - Request params: symbols=['AAPL'], timeframe=5m, depth=3
2026-01-28 18:40:57,473 - __main__ - INFO - [20260128_184057] Emitted run_started event
2026-01-28 18:40:57,473 - __main__ - INFO - [20260128_184057] Initializing Polygon client
2026-01-28 18:40:57,473 - __main__ - INFO - [20260128_184057] Fetching data for AAPL
2026-01-28 18:40:57,580 - __main__ - INFO - [20260128_184057] Successfully fetched 11450 bars for AAPL
2026-01-28 18:40:57,580 - __main__ - INFO - [20260128_184057] Using AAPL data for evolution
2026-01-28 18:40:57,580 - __main__ - INFO - [20260128_184057] Resetting LLM budget
2026-01-28 18:40:57,580 - __main__ - INFO - [20260128_184057] Created universe and time config
2026-01-28 18:40:57,580 - __main__ - INFO - [20260128_184057] Starting Darwin evolution
2026-01-28 18:40:57,580 - __main__ - INFO - [20260128_184057] run_darwin_with_events called with kwargs: ['data', 'universe', 'time_config', 'nl_text', 'depth', 'branching', 'survivors_per_layer', 'max_total_evals']
2026-01-28 18:40:57,580 - __main__ - INFO - [20260128_184057] Calling run_darwin
2026-01-28 18:40:57,582 - llm.compile - INFO - Strategy graph failed structure validation; attempting one repair
2026-01-28 18:40:57,584 - __main__ - ERROR - [20260128_184057] run_darwin failed: Unknown node type: CONSTANT
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 106, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 53, in run_backtest_on_data
    context = executor.execute(strategy, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 40, in execute
    self._validate_graph(graph)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 68, in _validate_graph
    raise GraphExecutionError(f"Unknown node type: {node.type}")
graph.executor.GraphExecutionError: Unknown node type: CONSTANT
2026-01-28 18:40:57,587 - __main__ - ERROR - [20260128_184057] Job failed with error: Unknown node type: CONSTANT
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 329, in _run_darwin_job
    summary = run_darwin_with_events(
        run_id=run_id,
    ...<8 lines>...
        max_total_evals=request.max_total_evals,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 106, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 53, in run_backtest_on_data
    context = executor.execute(strategy, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 40, in execute
    self._validate_graph(graph)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 68, in _validate_graph
    raise GraphExecutionError(f"Unknown node type: {node.type}")
graph.executor.GraphExecutionError: Unknown node type: CONSTANT
2026-01-28 18:40:57,588 - __main__ - ERROR - [20260128_184057] Full traceback:
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 329, in _run_darwin_job
    summary = run_darwin_with_events(
        run_id=run_id,
    ...<8 lines>...
        max_total_evals=request.max_total_evals,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 106, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 53, in run_backtest_on_data
    context = executor.execute(strategy, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 40, in execute
    self._validate_graph(graph)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 68, in _validate_graph
    raise GraphExecutionError(f"Unknown node type: {node.type}")
graph.executor.GraphExecutionError: Unknown node type: CONSTANT

2026-01-28 18:42:56,390 - __main__ - INFO - Received request to start run 20260128_184256
2026-01-28 18:42:56,391 - __main__ - INFO - Request: nl_text length=323, symbols=['AAPL'], timeframe=5m, dates=2024-10-01 to 2025-01-01, depth=3, branching=2, max_evals=50
2026-01-28 18:42:56,391 - __main__ - INFO - Initialized job tracking for 20260128_184256
2026-01-28 18:42:56,391 - __main__ - INFO - Added background task for 20260128_184256
2026-01-28 18:42:56,391 - __main__ - INFO - Starting Darwin job 20260128_184256
2026-01-28 18:42:56,391 - __main__ - INFO - Request params: symbols=['AAPL'], timeframe=5m, depth=3
2026-01-28 18:42:56,392 - __main__ - INFO - [20260128_184256] Emitted run_started event
2026-01-28 18:42:56,392 - __main__ - INFO - [20260128_184256] Initializing Polygon client
2026-01-28 18:42:56,392 - __main__ - INFO - [20260128_184256] Fetching data for AAPL
2026-01-28 18:42:56,404 - __main__ - INFO - [20260128_184256] Successfully fetched 11450 bars for AAPL
2026-01-28 18:42:56,404 - __main__ - INFO - [20260128_184256] Using AAPL data for evolution
2026-01-28 18:42:56,404 - __main__ - INFO - [20260128_184256] Resetting LLM budget
2026-01-28 18:42:56,404 - __main__ - INFO - [20260128_184256] Created universe and time config
2026-01-28 18:42:56,404 - __main__ - INFO - [20260128_184256] Starting Darwin evolution
2026-01-28 18:42:56,404 - __main__ - INFO - [20260128_184256] run_darwin_with_events called with kwargs: ['data', 'universe', 'time_config', 'nl_text', 'depth', 'branching', 'survivors_per_layer', 'max_total_evals']
2026-01-28 18:42:56,404 - __main__ - INFO - [20260128_184256] Calling run_darwin
2026-01-28 18:42:56,406 - llm.compile - INFO - Strategy graph failed structure validation; attempting one repair
2026-01-28 18:42:56,408 - __main__ - ERROR - [20260128_184256] run_darwin failed: Unknown node type: CONSTANT
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 106, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 53, in run_backtest_on_data
    context = executor.execute(strategy, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 40, in execute
    self._validate_graph(graph)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 68, in _validate_graph
    raise GraphExecutionError(f"Unknown node type: {node.type}")
graph.executor.GraphExecutionError: Unknown node type: CONSTANT
2026-01-28 18:42:56,410 - __main__ - ERROR - [20260128_184256] Job failed with error: Unknown node type: CONSTANT
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 329, in _run_darwin_job
    summary = run_darwin_with_events(
        run_id=run_id,
    ...<8 lines>...
        max_total_evals=request.max_total_evals,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 106, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 53, in run_backtest_on_data
    context = executor.execute(strategy, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 40, in execute
    self._validate_graph(graph)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 68, in _validate_graph
    raise GraphExecutionError(f"Unknown node type: {node.type}")
graph.executor.GraphExecutionError: Unknown node type: CONSTANT
2026-01-28 18:42:56,412 - __main__ - ERROR - [20260128_184256] Full traceback:
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 329, in _run_darwin_job
    summary = run_darwin_with_events(
        run_id=run_id,
    ...<8 lines>...
        max_total_evals=request.max_total_evals,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 106, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 53, in run_backtest_on_data
    context = executor.execute(strategy, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 40, in execute
    self._validate_graph(graph)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 68, in _validate_graph
    raise GraphExecutionError(f"Unknown node type: {node.type}")
graph.executor.GraphExecutionError: Unknown node type: CONSTANT

2026-01-28 18:48:57,800 - __main__ - INFO - Received request to start run 20260128_184857
2026-01-28 18:48:57,801 - __main__ - INFO - Request: nl_text length=324, symbols=['AAPL'], timeframe=5m, dates=2024-10-01 to 2025-01-01, depth=3, branching=3, max_evals=50
2026-01-28 18:48:57,801 - __main__ - INFO - Initialized job tracking for 20260128_184857
2026-01-28 18:48:57,801 - __main__ - INFO - Added background task for 20260128_184857
2026-01-28 18:48:57,802 - __main__ - INFO - Starting Darwin job 20260128_184857
2026-01-28 18:48:57,802 - __main__ - INFO - Request params: symbols=['AAPL'], timeframe=5m, depth=3
2026-01-28 18:48:57,802 - __main__ - INFO - [20260128_184857] Emitted run_started event
2026-01-28 18:48:57,802 - __main__ - INFO - [20260128_184857] Initializing Polygon client
2026-01-28 18:48:57,802 - __main__ - INFO - [20260128_184857] Fetching data for AAPL
2026-01-28 18:48:57,815 - __main__ - INFO - [20260128_184857] Successfully fetched 11450 bars for AAPL
2026-01-28 18:48:57,815 - __main__ - INFO - [20260128_184857] Using AAPL data for evolution
2026-01-28 18:48:57,815 - __main__ - INFO - [20260128_184857] Resetting LLM budget
2026-01-28 18:48:57,815 - __main__ - INFO - [20260128_184857] Created universe and time config
2026-01-28 18:48:57,815 - __main__ - INFO - [20260128_184857] Starting Darwin evolution
2026-01-28 18:48:57,816 - __main__ - INFO - [20260128_184857] run_darwin_with_events called with kwargs: ['data', 'universe', 'time_config', 'nl_text', 'depth', 'branching', 'survivors_per_layer', 'max_total_evals']
2026-01-28 18:48:57,816 - __main__ - INFO - [20260128_184857] Calling run_darwin
2026-01-28 18:49:07,806 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-28 18:49:17,567 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-28 18:49:17,572 - llm.compile - INFO - Strategy graph failed structure validation; attempting one repair
2026-01-28 18:49:27,375 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-28 18:49:37,390 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-28 18:49:37,500 - llm.compile - ERROR - Structure repair attempt failed; saving artifacts if possible
2026-01-28 18:49:37,501 - __main__ - ERROR - [20260128_184857] run_darwin failed: Structure validation failed after repair attempt: Node entry_compare references non-existent node 30
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/llm/compile.py", line 87, in compile_nl_to_graph
    strategy.validate_structure()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/schema.py", line 103, in validate_structure
    raise ValueError(f"Node {node.id} references non-existent node {ref_node_id}")
ValueError: Node entry_compare references non-existent node some_node

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/llm/compile.py", line 240, in _attempt_structure_repair
    try:
    
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/schema.py", line 103, in validate_structure
    raise ValueError(f"Node {node.id} references non-existent node {ref_node_id}")
ValueError: Node entry_compare references non-existent node 30

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 88, in run_darwin
    adam = compile_nl_to_graph(
        nl_text=nl_text,
    ...<3 lines>...
        run_id=run_id,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/llm/compile.py", line 90, in compile_nl_to_graph
    strategy = _attempt_structure_repair(
        llm_output=llm_output,
    ...<6 lines>...
        run_id=run_id,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/llm/compile.py", line 252, in _attempt_structure_repair
    )
ValueError: Structure validation failed after repair attempt: Node entry_compare references non-existent node 30
2026-01-28 18:49:37,504 - __main__ - ERROR - [20260128_184857] Job failed with error: Structure validation failed after repair attempt: Node entry_compare references non-existent node 30
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/llm/compile.py", line 87, in compile_nl_to_graph
    strategy.validate_structure()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/schema.py", line 103, in validate_structure
    raise ValueError(f"Node {node.id} references non-existent node {ref_node_id}")
ValueError: Node entry_compare references non-existent node some_node

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/llm/compile.py", line 240, in _attempt_structure_repair
    try:
    
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/schema.py", line 103, in validate_structure
    raise ValueError(f"Node {node.id} references non-existent node {ref_node_id}")
ValueError: Node entry_compare references non-existent node 30

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 329, in _run_darwin_job
    summary = run_darwin_with_events(
        run_id=run_id,
    ...<8 lines>...
        max_total_evals=request.max_total_evals,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 88, in run_darwin
    adam = compile_nl_to_graph(
        nl_text=nl_text,
    ...<3 lines>...
        run_id=run_id,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/llm/compile.py", line 90, in compile_nl_to_graph
    strategy = _attempt_structure_repair(
        llm_output=llm_output,
    ...<6 lines>...
        run_id=run_id,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/llm/compile.py", line 252, in _attempt_structure_repair
    )
ValueError: Structure validation failed after repair attempt: Node entry_compare references non-existent node 30
2026-01-28 18:49:37,508 - __main__ - ERROR - [20260128_184857] Full traceback:
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/llm/compile.py", line 87, in compile_nl_to_graph
    strategy.validate_structure()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/schema.py", line 103, in validate_structure
    raise ValueError(f"Node {node.id} references non-existent node {ref_node_id}")
ValueError: Node entry_compare references non-existent node some_node

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/llm/compile.py", line 240, in _attempt_structure_repair
    try:
    
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/schema.py", line 103, in validate_structure
    raise ValueError(f"Node {node.id} references non-existent node {ref_node_id}")
ValueError: Node entry_compare references non-existent node 30

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 329, in _run_darwin_job
    summary = run_darwin_with_events(
        run_id=run_id,
    ...<8 lines>...
        max_total_evals=request.max_total_evals,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 88, in run_darwin
    adam = compile_nl_to_graph(
        nl_text=nl_text,
    ...<3 lines>...
        run_id=run_id,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/llm/compile.py", line 90, in compile_nl_to_graph
    strategy = _attempt_structure_repair(
        llm_output=llm_output,
    ...<6 lines>...
        run_id=run_id,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/llm/compile.py", line 252, in _attempt_structure_repair
    )
ValueError: Structure validation failed after repair attempt: Node entry_compare references non-existent node 30

2026-01-28 19:05:56,667 - __main__ - INFO - Received request to start run 20260128_190556
2026-01-28 19:05:56,668 - __main__ - INFO - Request: nl_text length=324, symbols=['AAPL'], timeframe=5m, dates=2024-10-01 to 2025-01-01, depth=3, branching=3, max_evals=50
2026-01-28 19:05:56,668 - __main__ - INFO - Initialized job tracking for 20260128_190556
2026-01-28 19:05:56,668 - __main__ - INFO - Added background task for 20260128_190556
2026-01-28 19:05:56,669 - __main__ - INFO - Starting Darwin job 20260128_190556
2026-01-28 19:05:56,669 - __main__ - INFO - Request params: symbols=['AAPL'], timeframe=5m, depth=3
2026-01-28 19:05:56,669 - __main__ - INFO - [20260128_190556] Emitted run_started event
2026-01-28 19:05:56,669 - __main__ - INFO - [20260128_190556] Initializing Polygon client
2026-01-28 19:05:56,669 - __main__ - INFO - [20260128_190556] Fetching data for AAPL
2026-01-28 19:05:56,807 - __main__ - INFO - [20260128_190556] Successfully fetched 11450 bars for AAPL
2026-01-28 19:05:56,808 - __main__ - INFO - [20260128_190556] Using AAPL data for evolution
2026-01-28 19:05:56,808 - __main__ - INFO - [20260128_190556] Resetting LLM budget
2026-01-28 19:05:56,808 - __main__ - INFO - [20260128_190556] Created universe and time config
2026-01-28 19:05:56,808 - __main__ - INFO - [20260128_190556] Starting Darwin evolution
2026-01-28 19:05:56,808 - __main__ - INFO - [20260128_190556] run_darwin_with_events called with kwargs: ['data', 'universe', 'time_config', 'nl_text', 'depth', 'branching', 'survivors_per_layer', 'max_total_evals']
2026-01-28 19:05:56,808 - __main__ - INFO - [20260128_190556] Calling run_darwin
2026-01-28 19:06:10,734 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-28 19:06:10,768 - __main__ - ERROR - [20260128_190556] run_darwin failed: Unknown node type: NodeType.MARKET_DATA
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 106, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 53, in run_backtest_on_data
    context = executor.execute(strategy, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 40, in execute
    self._validate_graph(graph)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 69, in _validate_graph
    raise GraphExecutionError(f"Unknown node type: {node.type}")
graph.executor.GraphExecutionError: Unknown node type: NodeType.MARKET_DATA
2026-01-28 19:06:10,771 - __main__ - ERROR - [20260128_190556] Job failed with error: Unknown node type: NodeType.MARKET_DATA
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 329, in _run_darwin_job
    summary = run_darwin_with_events(
        run_id=run_id,
    ...<8 lines>...
        max_total_evals=request.max_total_evals,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 106, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 53, in run_backtest_on_data
    context = executor.execute(strategy, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 40, in execute
    self._validate_graph(graph)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 69, in _validate_graph
    raise GraphExecutionError(f"Unknown node type: {node.type}")
graph.executor.GraphExecutionError: Unknown node type: NodeType.MARKET_DATA
2026-01-28 19:06:10,773 - __main__ - ERROR - [20260128_190556] Full traceback:
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 329, in _run_darwin_job
    summary = run_darwin_with_events(
        run_id=run_id,
    ...<8 lines>...
        max_total_evals=request.max_total_evals,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 106, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 53, in run_backtest_on_data
    context = executor.execute(strategy, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 40, in execute
    self._validate_graph(graph)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 69, in _validate_graph
    raise GraphExecutionError(f"Unknown node type: {node.type}")
graph.executor.GraphExecutionError: Unknown node type: NodeType.MARKET_DATA

2026-01-28 19:13:37,258 - __main__ - INFO - Received request to start run 20260128_191337
2026-01-28 19:13:37,259 - __main__ - INFO - Request: nl_text length=324, symbols=['AAPL'], timeframe=5m, dates=2024-10-01 to 2025-01-01, depth=3, branching=3, max_evals=50
2026-01-28 19:13:37,259 - __main__ - INFO - Initialized job tracking for 20260128_191337
2026-01-28 19:13:37,259 - __main__ - INFO - Added background task for 20260128_191337
2026-01-28 19:13:37,260 - __main__ - INFO - Starting Darwin job 20260128_191337
2026-01-28 19:13:37,260 - __main__ - INFO - Request params: symbols=['AAPL'], timeframe=5m, depth=3
2026-01-28 19:13:37,260 - __main__ - INFO - [20260128_191337] Emitted run_started event
2026-01-28 19:13:37,260 - __main__ - INFO - [20260128_191337] Initializing Polygon client
2026-01-28 19:13:37,260 - __main__ - INFO - [20260128_191337] Fetching data for AAPL
2026-01-28 19:13:37,355 - __main__ - INFO - [20260128_191337] Successfully fetched 11450 bars for AAPL
2026-01-28 19:13:37,355 - __main__ - INFO - [20260128_191337] Using AAPL data for evolution
2026-01-28 19:13:37,355 - __main__ - INFO - [20260128_191337] Resetting LLM budget
2026-01-28 19:13:37,355 - __main__ - INFO - [20260128_191337] Created universe and time config
2026-01-28 19:13:37,355 - __main__ - INFO - [20260128_191337] Starting Darwin evolution
2026-01-28 19:13:37,355 - __main__ - INFO - [20260128_191337] run_darwin_with_events called with kwargs: ['data', 'universe', 'time_config', 'nl_text', 'depth', 'branching', 'survivors_per_layer', 'max_total_evals']
2026-01-28 19:13:37,356 - __main__ - INFO - [20260128_191337] Calling run_darwin
2026-01-28 19:13:37,372 - __main__ - ERROR - [20260128_191337] run_darwin failed: Error executing node compare_rsi_below_30 (type=Compare): Unknown comparison operator: lt
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 49, in execute
    node_outputs = self._execute_node(node, context, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 156, in _execute_node
    return self._eval_compare(inputs, params)
           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 341, in _eval_compare
    raise GraphExecutionError(f"Unknown comparison operator: {op}")
graph.executor.GraphExecutionError: Unknown comparison operator: lt

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 106, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 53, in run_backtest_on_data
    context = executor.execute(strategy, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 53, in execute
    raise GraphExecutionError(
        f"Error executing node {node.id} (type={node.type}): {e}"
    ) from e
graph.executor.GraphExecutionError: Error executing node compare_rsi_below_30 (type=Compare): Unknown comparison operator: lt
2026-01-28 19:13:37,375 - __main__ - ERROR - [20260128_191337] Job failed with error: Error executing node compare_rsi_below_30 (type=Compare): Unknown comparison operator: lt
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 49, in execute
    node_outputs = self._execute_node(node, context, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 156, in _execute_node
    return self._eval_compare(inputs, params)
           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 341, in _eval_compare
    raise GraphExecutionError(f"Unknown comparison operator: {op}")
graph.executor.GraphExecutionError: Unknown comparison operator: lt

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 329, in _run_darwin_job
    summary = run_darwin_with_events(
        run_id=run_id,
    ...<8 lines>...
        max_total_evals=request.max_total_evals,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 106, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 53, in run_backtest_on_data
    context = executor.execute(strategy, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 53, in execute
    raise GraphExecutionError(
        f"Error executing node {node.id} (type={node.type}): {e}"
    ) from e
graph.executor.GraphExecutionError: Error executing node compare_rsi_below_30 (type=Compare): Unknown comparison operator: lt
2026-01-28 19:13:37,376 - __main__ - ERROR - [20260128_191337] Full traceback:
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 49, in execute
    node_outputs = self._execute_node(node, context, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 156, in _execute_node
    return self._eval_compare(inputs, params)
           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 341, in _eval_compare
    raise GraphExecutionError(f"Unknown comparison operator: {op}")
graph.executor.GraphExecutionError: Unknown comparison operator: lt

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 329, in _run_darwin_job
    summary = run_darwin_with_events(
        run_id=run_id,
    ...<8 lines>...
        max_total_evals=request.max_total_evals,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 106, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 53, in run_backtest_on_data
    context = executor.execute(strategy, data)
  File "/Users/severinspagnola/Desktop/agentic_quant/graph/executor.py", line 53, in execute
    raise GraphExecutionError(
        f"Error executing node {node.id} (type={node.type}): {e}"
    ) from e
graph.executor.GraphExecutionError: Error executing node compare_rsi_below_30 (type=Compare): Unknown comparison operator: lt

2026-01-28 19:24:54,277 - __main__ - WARNING - HTTP 404 GET /api/run/20260128_191337/events -> Run not found
2026-01-28 19:24:54,278 - __main__ - WARNING - HTTP 404 GET /api/run/20260128_191337/events -> Run not found
2026-01-28 19:24:54,278 - __main__ - INFO - HTTP 404 GET /api/run/20260128_191337/events from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.002s
2026-01-28 19:24:54,279 - __main__ - INFO - HTTP 404 GET /api/run/20260128_191337/events from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.002s
2026-01-28 20:36:56,665 - __main__ - WARNING - HTTP 404 GET /api/run/20260128_191337/events -> Run not found
2026-01-28 20:36:56,667 - __main__ - INFO - HTTP 404 GET /api/run/20260128_191337/events from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.002s
2026-01-28 20:36:56,667 - __main__ - WARNING - HTTP 404 GET /api/run/20260128_191337/events -> Run not found
2026-01-28 20:36:56,667 - __main__ - INFO - HTTP 404 GET /api/run/20260128_191337/events from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.000s
2026-01-28 20:58:18,837 - __main__ - WARNING - HTTP 404 GET /api/run/20260128_191337/events -> Run not found
2026-01-28 20:58:18,838 - __main__ - INFO - HTTP 404 GET /api/run/20260128_191337/events from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.002s
2026-01-28 20:58:18,839 - __main__ - WARNING - HTTP 404 GET /api/run/20260128_191337/events -> Run not found
2026-01-28 20:58:18,839 - __main__ - INFO - HTTP 404 GET /api/run/20260128_191337/events from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.000s
2026-01-29 07:23:26,506 - __main__ - INFO - Received request to start run 20260129_072326
2026-01-29 07:23:26,508 - __main__ - INFO - Request: nl_text length=324, symbols=['AAPL'], timeframe=5m, dates=2024-10-01 to 2025-01-01, depth=3, branching=3, max_evals=50
2026-01-29 07:23:26,508 - __main__ - INFO - Initialized job tracking for 20260129_072326
2026-01-29 07:23:26,509 - __main__ - INFO - Added background task for 20260129_072326
2026-01-29 07:23:26,510 - __main__ - INFO - Starting Darwin job 20260129_072326
2026-01-29 07:23:26,510 - __main__ - INFO - Request params: symbols=['AAPL'], timeframe=5m, depth=3
2026-01-29 07:23:26,510 - __main__ - INFO - [20260129_072326] Emitted run_started event
2026-01-29 07:23:26,510 - __main__ - INFO - [20260129_072326] Initializing Polygon client
2026-01-29 07:23:26,511 - __main__ - INFO - [20260129_072326] Fetching data for AAPL
2026-01-29 07:23:26,822 - __main__ - INFO - [20260129_072326] Successfully fetched 11450 bars for AAPL
2026-01-29 07:23:26,823 - __main__ - INFO - [20260129_072326] Using AAPL data for evolution
2026-01-29 07:23:26,823 - __main__ - INFO - [20260129_072326] Resetting LLM budget
2026-01-29 07:23:26,823 - __main__ - INFO - [20260129_072326] Created universe and time config
2026-01-29 07:23:26,823 - __main__ - INFO - [20260129_072326] Starting Darwin evolution
2026-01-29 07:23:26,824 - __main__ - INFO - [20260129_072326] run_darwin_with_events called with kwargs: ['data', 'universe', 'time_config', 'nl_text', 'depth', 'branching', 'survivors_per_layer', 'max_total_evals']
2026-01-29 07:23:26,824 - __main__ - INFO - [20260129_072326] Calling run_darwin
2026-01-29 07:23:26,865 - __main__ - ERROR - [20260129_072326] run_darwin failed: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 106, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 59, in run_backtest_on_data
    results = run_backtest(data=data, orders_config=orders_config, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/backtest/simulator.py", line 427, in run_backtest
    return simulator.run(
           ~~~~~~~~~~~~~^
        data=data,
        ^^^^^^^^^^
    ...<5 lines>...
        risk_limits=risk_limits,
        ^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/severinspagnola/Desktop/agentic_quant/backtest/simulator.py", line 166, in run
    atr_series = stop_config.get('atr') or tp_config.get('atr')
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/venv/lib/python3.14/site-packages/pandas/core/generic.py", line 1513, in __bool__
    raise ValueError(
    ...<2 lines>...
    )
ValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().
2026-01-29 07:23:26,872 - __main__ - ERROR - [20260129_072326] Job failed with error: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 329, in _run_darwin_job
    summary = run_darwin_with_events(
        run_id=run_id,
    ...<8 lines>...
        max_total_evals=request.max_total_evals,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 106, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 59, in run_backtest_on_data
    results = run_backtest(data=data, orders_config=orders_config, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/backtest/simulator.py", line 427, in run_backtest
    return simulator.run(
           ~~~~~~~~~~~~~^
        data=data,
        ^^^^^^^^^^
    ...<5 lines>...
        risk_limits=risk_limits,
        ^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/severinspagnola/Desktop/agentic_quant/backtest/simulator.py", line 166, in run
    atr_series = stop_config.get('atr') or tp_config.get('atr')
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/venv/lib/python3.14/site-packages/pandas/core/generic.py", line 1513, in __bool__
    raise ValueError(
    ...<2 lines>...
    )
ValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().
2026-01-29 07:23:26,873 - __main__ - ERROR - [20260129_072326] Full traceback:
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 329, in _run_darwin_job
    summary = run_darwin_with_events(
        run_id=run_id,
    ...<8 lines>...
        max_total_evals=request.max_total_evals,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 252, in run_darwin_with_events
    result = run_darwin(**darwin_kwargs)
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 106, in run_darwin
    adam_result = evaluate_strategy(adam, data, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 59, in run_backtest_on_data
    results = run_backtest(data=data, orders_config=orders_config, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/backtest/simulator.py", line 427, in run_backtest
    return simulator.run(
           ~~~~~~~~~~~~~^
        data=data,
        ^^^^^^^^^^
    ...<5 lines>...
        risk_limits=risk_limits,
        ^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/severinspagnola/Desktop/agentic_quant/backtest/simulator.py", line 166, in run
    atr_series = stop_config.get('atr') or tp_config.get('atr')
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/venv/lib/python3.14/site-packages/pandas/core/generic.py", line 1513, in __bool__
    raise ValueError(
    ...<2 lines>...
    )
ValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().

2026-01-29 11:35:32,743 - __main__ - WARNING - HTTP 404 GET /api/runs/20260129_074238/llm/usage -> Transcript not found
2026-01-29 11:35:32,743 - __main__ - INFO - HTTP 404 GET /api/runs/20260129_074238/llm/usage from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.001s
2026-01-29 11:35:32,756 - __main__ - WARNING - HTTP 404 GET /api/runs/20260129_074238/llm/usage -> Transcript not found
2026-01-29 11:35:32,756 - __main__ - INFO - HTTP 404 GET /api/runs/20260129_074238/llm/usage from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.000s
2026-01-29 11:35:32,770 - __main__ - WARNING - HTTP 404 GET /api/run/20260129_074238/events -> Run not found
2026-01-29 11:35:32,770 - __main__ - INFO - HTTP 404 GET /api/run/20260129_074238/events from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.001s
2026-01-29 11:35:56,729 - __main__ - WARNING - HTTP 404 GET /api/runs/20260129_073630/llm/usage -> Transcript not found
2026-01-29 11:35:56,730 - __main__ - INFO - HTTP 404 GET /api/runs/20260129_073630/llm/usage from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.001s
2026-01-29 11:35:56,731 - __main__ - WARNING - HTTP 404 GET /api/run/20260129_073630/events -> Run not found
2026-01-29 11:35:56,732 - __main__ - INFO - HTTP 404 GET /api/run/20260129_073630/events from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.001s
2026-01-29 11:35:56,733 - __main__ - WARNING - HTTP 404 GET /api/runs/20260129_073630/llm/usage -> Transcript not found
2026-01-29 11:35:56,734 - __main__ - INFO - HTTP 404 GET /api/runs/20260129_073630/llm/usage from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.001s
2026-01-29 11:36:02,003 - __main__ - WARNING - HTTP 404 GET /api/runs/20260129_074002/llm/usage -> Transcript not found
2026-01-29 11:36:02,003 - __main__ - INFO - HTTP 404 GET /api/runs/20260129_074002/llm/usage from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.001s
2026-01-29 11:36:02,006 - __main__ - WARNING - HTTP 404 GET /api/runs/20260129_074002/llm/usage -> Transcript not found
2026-01-29 11:36:02,006 - __main__ - INFO - HTTP 404 GET /api/runs/20260129_074002/llm/usage from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.001s
2026-01-29 11:36:02,010 - __main__ - WARNING - HTTP 404 GET /api/run/20260129_074002/events -> Run not found
2026-01-29 11:36:02,010 - __main__ - INFO - HTTP 404 GET /api/run/20260129_074002/events from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.001s
2026-01-29 11:36:05,850 - __main__ - WARNING - HTTP 404 GET /api/runs/20260129_073542/llm/usage -> Transcript not found
2026-01-29 11:36:05,851 - __main__ - INFO - HTTP 404 GET /api/runs/20260129_073542/llm/usage from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.000s
2026-01-29 11:36:05,854 - __main__ - WARNING - HTTP 404 GET /api/runs/20260129_073542/llm/usage -> Transcript not found
2026-01-29 11:36:05,854 - __main__ - INFO - HTTP 404 GET /api/runs/20260129_073542/llm/usage from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.001s
2026-01-29 11:36:05,860 - __main__ - WARNING - HTTP 404 GET /api/run/20260129_073542/events -> Run not found
2026-01-29 11:36:05,861 - __main__ - INFO - HTTP 404 GET /api/run/20260129_073542/events from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.001s
2026-01-29 11:36:51,377 - __main__ - WARNING - HTTP 404 GET /api/runs/20260129_074238/llm/usage -> Transcript not found
2026-01-29 11:36:51,377 - __main__ - INFO - HTTP 404 GET /api/runs/20260129_074238/llm/usage from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.001s
2026-01-29 11:36:51,380 - __main__ - WARNING - HTTP 404 GET /api/runs/20260129_074238/llm/usage -> Transcript not found
2026-01-29 11:36:51,380 - __main__ - INFO - HTTP 404 GET /api/runs/20260129_074238/llm/usage from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.000s
2026-01-29 11:36:51,386 - __main__ - WARNING - HTTP 404 GET /api/run/20260129_074238/events -> Run not found
2026-01-29 11:36:51,386 - __main__ - INFO - HTTP 404 GET /api/run/20260129_074238/events from 127.0.0.1 (UA=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36) in 0.000s
2026-01-29 19:56:25,203 - __main__ - INFO - Received request to start run 20260129_195625
2026-01-29 19:56:25,206 - __main__ - INFO - Request: nl_text length=234, symbols=['AAPL'], timeframe=5m, dates=2024-10-01 to 2024-12-31, depth=2, branching=2, max_evals=10
2026-01-29 19:56:25,207 - __main__ - INFO - Initialized job tracking for 20260129_195625
2026-01-29 19:56:25,207 - __main__ - INFO - Added background task for 20260129_195625
2026-01-29 19:56:25,213 - __main__ - INFO - Starting Darwin job 20260129_195625
2026-01-29 19:56:25,223 - __main__ - INFO - Request params: symbols=['AAPL'], timeframe=5m, depth=2
2026-01-29 19:56:25,223 - __main__ - INFO - [20260129_195625] Emitted run_started event
2026-01-29 19:56:25,223 - __main__ - INFO - [20260129_195625] Initializing Polygon client
2026-01-29 19:56:25,225 - __main__ - INFO - [20260129_195625] Fetching data for AAPL
2026-01-29 19:56:25,406 - __main__ - INFO - [20260129_195625] Successfully fetched 11450 bars for AAPL
2026-01-29 19:56:25,406 - __main__ - INFO - [20260129_195625] Using AAPL data for evolution
2026-01-29 19:56:25,406 - __main__ - INFO - [20260129_195625] Resetting LLM budget
2026-01-29 19:56:25,407 - __main__ - INFO - [20260129_195625] Created universe and time config
2026-01-29 19:56:25,407 - __main__ - INFO - [20260129_195625] Starting Darwin evolution
2026-01-29 19:56:25,407 - __main__ - INFO - [20260129_195625] run_darwin_with_events called with kwargs: ['data', 'universe', 'time_config', 'nl_text', 'depth', 'branching', 'survivors_per_layer', 'max_total_evals']
2026-01-29 19:56:25,407 - __main__ - INFO - [20260129_195625] Calling run_darwin
2026-01-29 19:56:36,226 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-29 19:56:36,301 - __main__ - ERROR - [20260129_195625] run_darwin failed: unsupported operand type(s) for *: 'float' and 'NoneType'
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 492, in run_darwin_with_events
    logger.info(f"[{run_id}] run_darwin returned successfully")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 106, in run_darwin
    "top_strategies": [],
      ^^^^^^^^^^^^^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 59, in run_backtest_on_data
    results = run_backtest(data=data, orders_config=orders_config, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/backtest/simulator.py", line 429, in run_backtest
    return simulator.run(
           ~~~~~~~~~~~~~^
        data=data,
        ^^^^^^^^^^
    ...<5 lines>...
        risk_limits=risk_limits,
        ^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/severinspagnola/Desktop/agentic_quant/backtest/simulator.py", line 153, in run
    max_profit = self.initial_capital * risk_limits.get('max_profit_pct', 0.10)
                 ~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for *: 'float' and 'NoneType'
2026-01-29 19:56:36,305 - __main__ - ERROR - [20260129_195625] Job failed with error: unsupported operand type(s) for *: 'float' and 'NoneType'
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 569, in _run_darwin_job
    
    
    ...<10 lines>...
        max_total_evals=request.max_total_evals,
        ^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 492, in run_darwin_with_events
    logger.info(f"[{run_id}] run_darwin returned successfully")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 106, in run_darwin
    "top_strategies": [],
      ^^^^^^^^^^^^^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 59, in run_backtest_on_data
    results = run_backtest(data=data, orders_config=orders_config, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/backtest/simulator.py", line 429, in run_backtest
    return simulator.run(
           ~~~~~~~~~~~~~^
        data=data,
        ^^^^^^^^^^
    ...<5 lines>...
        risk_limits=risk_limits,
        ^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/severinspagnola/Desktop/agentic_quant/backtest/simulator.py", line 153, in run
    max_profit = self.initial_capital * risk_limits.get('max_profit_pct', 0.10)
                 ~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for *: 'float' and 'NoneType'
2026-01-29 19:56:36,307 - __main__ - ERROR - [20260129_195625] Full traceback:
Traceback (most recent call last):
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 569, in _run_darwin_job
    
    
    ...<10 lines>...
        max_total_evals=request.max_total_evals,
        ^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/backend_api/main.py", line 492, in run_darwin_with_events
    logger.info(f"[{run_id}] run_darwin returned successfully")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/evolution/darwin.py", line 106, in run_darwin
    "top_strategies": [],
      ^^^^^^^^^^^^^^^^^^^
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/evaluation.py", line 99, in evaluate_strategy
    validation_results = run_full_validation(
        strategy=strategy,
    ...<5 lines>...
        initial_capital=initial_capital,
    )
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 310, in run_full_validation
    train_results = run_backtest_on_data(strategy, train_data, initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/validation/overfit_tests.py", line 59, in run_backtest_on_data
    results = run_backtest(data=data, orders_config=orders_config, initial_capital=initial_capital)
  File "/Users/severinspagnola/Desktop/agentic_quant/backtest/simulator.py", line 429, in run_backtest
    return simulator.run(
           ~~~~~~~~~~~~~^
        data=data,
        ^^^^^^^^^^
    ...<5 lines>...
        risk_limits=risk_limits,
        ^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/severinspagnola/Desktop/agentic_quant/backtest/simulator.py", line 153, in run
    max_profit = self.initial_capital * risk_limits.get('max_profit_pct', 0.10)
                 ~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for *: 'float' and 'NoneType'

